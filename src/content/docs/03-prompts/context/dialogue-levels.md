---
title: 对话层级
description: 理解大语言模型对话中的System、Assistant和User三个层级角色。
---

# 对话层级

在与大语言模型的交互中，对话由三个不同层级的角色组成：系统提示（System）、助手消息（Assistant）和用户提示（User）。理解这三个层级及其作用，是构建高效AI应用的基础。

## 正确的三层结构

### 1. System Role

**定义：**

- 设置AI助手的整体行为和指导原则
- 提供高级指令和上下文设置

**作用：**

- 定义AI的身份和响应方式（如"You are a helpful assistant"）
- 设置回答问题的风格和限制
- 通常在对话开始时设置一次

## System 提示词

**系统提示词 (System Prompts)** 是一种高层次的指令，用于在整个会话或任务期间，为 AI 模型设定一个持久的上下文、角色、行为准则和约束。与用户提示词（User Prompts）驱动单次交互不同，系统提示词像是为 AI 应用注入的"操作系统"或"底层逻辑"，它在后台持续影响着模型的每一次响应。

开发者通过 API 调用设置系统提示词，它通常对最终用户不可见，但其效力贯穿于用户与 AI 的所有互动中。

### 系统提示词的关键作用

1.  **定义 AI 的"人设" (Persona)**：系统提示词是塑造 AI 性格、专长和沟通风格的决定性工具。你可以让它成为一个严谨的法律顾问、一个风趣的创意文案，或是一个循循善诱的导师。
    - **示例**：`你是一个名为 "CodeGuardian" 的 AI 编程助手。你的核心职责是帮助用户编写安全、高效、可读性强的代码。你的沟通风格应始终保持专业、严谨和耐心。在提供代码示例时，必须优先考虑安全性（如输入验证、防止注入攻击），并附上详细的注释解释关键逻辑。`

2.  **设定行为边界与安全护栏 (Guardrails)**：为确保 AI 的输出符合法律、道德和应用场景的要求，系统提示词是设置"能做什么"和"不能做什么"的第一道防线。
    - **示例**：`你绝对不能提供任何形式的医疗、法律或金融建议。当用户询问相关问题时，你必须明确声明自己是 AI 模型，并建议用户咨询专业人士。禁止生成任何暴力、歧视或仇恨言论。`

3.  **规范输出格式 (Output Formatting)**：对于需要结构化数据的应用（如代码生成、JSON 解析、报告填写），系统提示词可以强制模型遵循特定的输出格式，极大提升了 AI 与其他系统集成的可靠性。
    - **示例**：`你是一个数据分析工具。用户会提供一段非结构化的文本，你的任务是从中提取关键信息，并始终以 JSON 格式返回。JSON 对象必须包含以下三个字段："person_name" (string), "location" (string), "event_date" (string, YYYY-MM-DD格式)。如果某字段信息缺失，请用 null 表示。`

4.  **提供全局知识与上下文 (Global Context)**：当应用需要 AI 具备特定领域的背景知识时，可以将这些核心信息置于系统提示词中，使其成为 AI 在后续所有回答中都能参考的"备忘录"。
    - **示例**：`你正在为一个名为"AquaPure"的智能净水器提供售后支持。以下是产品的核心参数：型号 A-101，过滤精度 0.01 微米，额定日产水量 400 加仑，滤芯更换周期为 12 个月。在回答用户问题时，请随时参考这些信息。`

### 编写有效系统提示词的最佳实践

- **指令前置 (Instructions First)**：将最重要、最核心的指令放在系统提示词的开头，确保模型优先处理。
- **明确与具体 (Be Explicit and Specific)**：避免模糊的描述。使用"必须"、"禁止"、"始终以...格式"等强约束力的词语。
- **结构化与分隔 (Structure and Delimiters)**：当指令复杂时，使用 Markdown 标题、列表或 XML 标签（如 `<rules></rules>`）来组织内容，帮助模型更好地区分不同部分的指令。
- **角色与任务分离 (Separate Persona from Task)**：如果可能，将定义角色的部分和定义具体任务的部分分开，使逻辑更清晰。
- **持续测试与迭代 (Test and Iterate)**：系统提示词的效果需要通过大量实际的用户交互来检验。根据模型在边界情况下的表现，不断优化和完善你的指令。

---

### 2. User Role

**定义：**

- 代表人类用户的输入消息
- 用户提出的查询、问题或命令

**作用：**

- 提供具体的请求或评论供助手响应
- 每次交互中用户想要AI完成的任务
- 相当于用户的"发言"

## User 提示词

**用户提示词 (User Prompts)** 是用户向 AI 模型发出的指令、问题或输入，是整个 AI 交互的起点。它定义了任务的边界、目标和约束，是决定模型输出质量最关键的变量。

一个精心设计的提示词，如同为 AI 设定了清晰的导航，能够引导其在庞大的知识空间中，精准定位并生成符合预期的结果。反之，一个模糊、笼统的提示词，则可能导致模型产出宽泛、不相关甚至错误的内容。

### 为什么用户提示词至关重要

在与大语言模型（LLM）的协作中，我们并非在"搜索"一个既定答案，而是在"共同创作"一个解决方案。用户提示词的质量直接影响了这次创作的成败。

- **精确性与相关性**：清晰的指令能帮助模型过滤掉无关信息，聚焦于核心任务，从而生成高度相关的回答。
- **效率与成本**：有效的提示词可以减少反复试错和修改的次数，一步到位地获得满意结果，从而节省时间和计算资源。
- **激发模型潜力**：通过高级技巧（如角色扮演、思维链、提供示例等），用户可以解锁模型更深层次的推理和创造能力。

### 编写有效用户提示词的原则

#### 1. **明确具体 (Be Specific and Clear)**

避免使用模糊的语言。任务越具体，模型表现越好。

- **反例**：`写一些关于狗的介绍。`
- **正例**：`以一个热爱动物的科普作家的口吻，为小学生写一篇 300 字左右的短文，介绍金毛寻回犬的性格特点、体型大小和日常护理要点。`

#### 2. **提供上下文 (Provide Context)**

上下文为模型提供了必要的背景信息，帮助它更好地理解你的意图。

- **反例**：`总结一下这篇文章。`
- **正例**：`我是一名正在研究人工智能对市场营销影响的大学生，请帮我将以下这篇关于"生成式 AI 最新进展"的学术论文，总结为 500 字的摘要，重点突出其在广告创意和个性化推荐方面的应用。`

#### 3. **定义角色 (Define a Role)**

为 AI 指定一个角色，可以有效地引导其输出的语气、风格和专业水平。

- **示例**：
  - `你现在是一位资深的软件架构师，请评估一下在微服务架构中使用 gRPC 和 RESTful API 的优缺点。`
  - `扮演一位经验丰富的旅行规划师，为我设计一个为期 7 天的日本关西家庭游行程，重点是文化体验和美食，预算为每人 1 万元人民币。`

#### 4. **使用清晰的格式 (Use Clear Formatting)**

当指令复杂时，使用分隔符、标题、列表等格式化手段，可以帮助模型更好地解析任务结构。

#### 5. **提供示例 (Provide Examples / Few-shot Prompting)**

给出少量输入和输出的范例（Few-shot），是让模型快速学习并模仿你所需格式或风格的最有效方法之一。

#### 6. **引导思考过程 (Chain of Thought)**

对于需要推理的问题，要求模型"一步一步地思考"或"展示其推理过程"，可以显著提高复杂问题解答的准确性。

- **示例**：`一个水桶里装了 10 升水，一个 3 升的杯子和一个 7 升的杯子，如何准确量出 5 升水？请一步一步地说明你的推理过程。`

---

### 3. Assistant Role

**正确定义：**

- 存储AI模型之前的响应内容
- 维护对话历史和上下文
- 记录AI在对话中的所有回复

**作用：**

- 保存AI的历史回答以维持对话连贯性
- 提供对话上下文，让AI了解之前说过什么
- 确保对话的一致性和相关性

## Assistant 消息

在API调用中，Assistant角色不是当前的回复生成，而是：

- 历史回复的记录
- 对话上下文的维护
- 之前响应的存储

### 结构示例

在API调用中，结构如下：

```json
[
  { "role": "system", "content": "You are a helpful assistant" },
  { "role": "user", "content": "Hello" },
  { "role": "assistant", "content": "Hi! How can I help you?" },
  { "role": "user", "content": "What's the weather?" }
]
```
这里assistant消息是为了让AI知道它之前已经回复过什么，以保持对话的连贯性。

---

## 总结

系统提示词是构建可靠、可控、专业的 AI 应用的基石。它将开发者从反复提醒 AI "你是谁、该做什么"的繁琐工作中解放出来，让 AI 能够在一个稳定、明确的框架内，高效地响应用户层出不穷的需求。精通系统提示词的编写，是从"使用 AI"到"驾驭 AI"的关键一步。

编写用户提示词是一项技能，更是一门艺术。通过不断实践上述原则，你将能更高效地与 AI 协作，将其能力发挥到极致，从而解决更复杂、更具创造性的问题。
