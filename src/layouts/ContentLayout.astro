---
import BaseLayout from './BaseLayout.astro';
import Header from '../components/Header.astro';
import LeftSidebar from '../components/LeftSidebar.astro';
import RightSidebar from '../components/RightSidebar.astro';
import type { SidebarSection } from '../scripts/sidebars';

const { 
  title, 
  section, 
  sidebarContent,
  sidebarItems,
  headings = []
}: { title: string; section: string; sidebarContent?: string; sidebarItems?: SidebarSection; headings?: Array<any> } = Astro.props;
---

<BaseLayout title={title}>
  <Header currentPage={section === 'DEMO' ? 'demo' : section === '技术向' ? 'tech' : section === 'Fish想说' ? 'fish-talks' : section === '基础使用' ? 'basic' : section === '提示词' ? 'prompts' : section === '进阶玩法' ? 'advanced' : section === '好玩的' ? 'fun' : section === '资源合集' ? 'resources' : 'home'} />
  
  <div class="content-wrapper">
    <LeftSidebar section={section} items={sidebarItems}>
      {sidebarContent ? <Fragment set:html={sidebarContent} /> : null}
    </LeftSidebar>
    
    <main class="content">
      <div class="content-inner">
        <slot />
      </div>
    </main>
    
    <RightSidebar headings={headings} />
  </div>
</BaseLayout>

<style>
.content-wrapper {
  display: flex;
  margin-top: 60px;
  min-height: calc(100vh - 60px);
}

.content {
  flex: 1;
  margin-left: 250px;
  margin-right: 250px;
  padding: 2rem;
  background-color: #000;
}

.content-inner {
  max-width: 800px;
  margin: 0 auto;
}

@media (max-width: 1024px) {
  .left-sidebar,
  .right-sidebar {
    display: none;
  }
  
  .content {
    margin-left: 0;
    margin-right: 0;
  }
}
</style>